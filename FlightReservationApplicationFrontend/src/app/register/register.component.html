<div class="container">
  <div *ngIf="isRegistered">
    <p class="text-success">Registration successful!</p>
  </div>

  <div *ngIf="isAlreadyRegistered">
    <p class="text-danger">
      Username already exists! Please choose another username.
    </p>
  </div>
  <div class="container custom-text">
    <h2>Please Register If You Are New To Application</h2>
  </div>
  <form [formGroup]="registrationForm" (ngSubmit)="register()">
    <div class="row mb-3">
      <label for="firstName" class="col-sm-2 col-form-label">First Name:</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control hover-effect"
          id="firstName"
          formControlName="firstName"
        />
        <mat-error *ngIf="registrationForm.get('firstName')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('firstName')?.hasError('required')"
          >
            First Name is required
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="lastName" class="col-sm-2 col-form-label">Last Name:</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control hover-effect"
          id="lastName"
          formControlName="lastName"
        />
        <mat-error *ngIf="registrationForm.get('lastName')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('lastName')?.hasError('required')"
          >
            Last Name is required
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="position" class="col-sm-2 col-form-label">Position:</label>
      <div class="col-sm-10">
        <select
          class="form-select hover-effect"
          id="position"
          formControlName="position"
        >
          <option value="" disabled selected>Select User</option>
          <option value="Staff">Staff</option>
          <option value="Customer">Customer</option>
          <option value="Admin">Admin</option>
        </select>
        <mat-error *ngIf="registrationForm.get('position')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('position')?.hasError('required')"
          >
            Position is required
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="email" class="col-sm-2 col-form-label">Email:</label>
      <div class="col-sm-10">
        <input
          type="email"
          class="form-control hover-effect"
          id="email"
          formControlName="email"
        />
        <mat-error *ngIf="registrationForm.get('email')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('email')?.hasError('required')"
          >
            Email is required
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('email')?.hasError('email')"
          >
            Invalid Email Address
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="birthdate" class="col-sm-2 col-form-label">Birthdate:</label>
      <div class="col-sm-10">
        <input
          type="date"
          class="form-control hover-effect"
          id="birthdate"
          formControlName="birthdate"
        />
        <mat-error *ngIf="registrationForm.get('birthdate')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('birthdate')?.hasError('required')"
          >
            Birthdate is required
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="phoneNo" class="col-sm-2 col-form-label">Phone No:</label>
      <div class="col-sm-10">
        <input
          type="tel"
          class="form-control hover-effect"
          id="phoneNo"
          formControlName="phoneNo"
        />
        <mat-error *ngIf="registrationForm.get('phoneNo')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('phoneNo')?.hasError('required')"
          >
            Phone No is required
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('phoneNo')?.hasError('pattern')"
          >
            Please enter a valid 10-digit phone number
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="username" class="col-sm-2 col-form-label">Username:</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control hover-effect"
          id="username"
          formControlName="username"
        />
        <mat-error *ngIf="registrationForm.get('username')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('username')?.hasError('required')"
          >
            Username is required
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('username')?.hasError('minlength')"
          >
            Username must be at least 3 characters
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('username')?.hasError('maxlength')"
          >
            Username must be at most 20 characters
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('username')?.hasError('pattern')"
          >
            Only letters, numbers, and underscores are allowed
          </mat-error>
        </mat-error>
      </div>
    </div>

    <div class="row mb-3">
      <label for="password" class="col-sm-2 col-form-label">Password:</label>
      <div class="col-sm-10">
        <input
          type="{{ showPassword ? 'text' : 'password' }}"
          class="form-control hover-effect mb-3"
          id="password"
          formControlName="password"
        />
        <button
          class="btn btn-outline-secondary"
          type="button"
          (click)="togglePasswordVisibility()"
        >
          <i class="material-icons">
            {{ showPassword ? "visibility_off" : "visibility" }}
          </i>
        </button>
        <mat-error *ngIf="registrationForm.get('password')?.touched">
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('password')?.hasError('required')"
          >
            Password is required
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('password')?.hasError('minlength')"
          >
            Password must be at least 8 characters
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('password')?.hasError('maxlength')"
          >
            Password must be at most 20 characters
          </mat-error>
          <mat-error
            class="text-danger"
            *ngIf="registrationForm.get('password')?.hasError('pattern')"
          >
            Only letters, numbers, and underscores are allowed
          </mat-error>
        </mat-error>
      </div>
    </div>
    <div>
      <button type="submit" class="btn btn-outline-primary mb-3 me-2">
        Register
      </button>
      <button (click)="goBack()" class="btn btn-outline-dark mb-3">Back</button>
    </div>
    <div>
      <a routerLink="/login" style="text-decoration: none"
        >If You Successfully Register Please Login</a
      >
    </div>
  </form>
</div>
